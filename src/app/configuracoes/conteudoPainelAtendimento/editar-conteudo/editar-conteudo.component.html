<div class="container" *ngIf="isDataAvailable">
  <h2>Editar Conteúdo Configurado</h2>

  <form novalidate (ngSubmit)="editarConteudo()" [formGroup]="editarConteudoForm">

    <div class="form-horizontal">

      <div class="alert alert-danger" *ngIf="errors.length > 0">
        <h3 id="msgRetorno">Opa! Alguma coisa não deu certo:</h3>
        <ul>
          <li *ngFor="let error of errors">{{ error }}</li>
        </ul>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="tipo">Tipo</label>
        <div class="col-md-10">
          <select class="form-control" [(ngModel)]="tipo" (change)="clearConteudo()" formControlName="tipo" id="tipo">
            <option value="0">Texto HTML</option>
            <option value="1">Imagem</option>
          </select>
        </div>
      </div>


      <div class="form-group" [ngClass]="{'has-error': displayMessage.descricao }">
        <label class="col-md-2 control-label" for="descricao">Descricao</label>
        <div class="col-md-10">
          <input class="form-control" id="descricao" type="text" placeholder="descricao (requerido)"
            formControlName="descricao" />
          <span class="text-danger" *ngIf="displayMessage.descricao">
            <p [innerHTML]="displayMessage.descricao"></p>
          </span>
        </div>
      </div>


      <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
          <div class="checkbox">
            <input type="checkbox" name="ativo" id="ativo" formControlName="ativo">
            <label for="ativo">Ativo</label>
          </div>
        </div>
      </div>

      <div class="col-md-offset-2 col-md-10" *ngIf="tipo==0">
        <div class="form-group" [ngClass]="{'has-error': displayMessage.conteudo}">
          <div class="basic-demo">
            <legend>{{editorTextoService.tituloEditor}}</legend>
            <ck-editor [(config)]="editorTextoService.configEditor" [(ngModel)]="editorTextoService.htmlContentEditor"
              #ckEditor="ckEditor" language='pt-br' skin="moono-lisa" id="conteudo" formControlName="conteudo">
            </ck-editor>
            <span class="text-danger" *ngIf="displayMessage.conteudo">
              <p [innerHTML]="displayMessage.conteudo"></p>
            </span>
          </div>
        </div>
      </div>

      <div class="col-md-offset-2 col-md-10" *ngIf="tipo==1">
        <div class="form-group" [ngClass]="{'has-error': displayMessage.conteudo}">
            <legend>Imagem</legend>
            <label class="uploader" ondragover="return false;" [class.loaded]="loaded"
              [style.outlineColor]="dragging ? activeColor : baseColor" (dragenter)="handleDragEnter()"
              (dragleave)="handleDragLeave()" (drop)="handleDrop($event)">

              <i class="icon icon-upload" [style.color]="dragging 
            ? ((conteudo.length > 0) ? overlayColor : activeColor)
            : ((conteudo.length > 0) ? overlayColor : baseColor)"></i>

              <img [(src)]="conteudo" (load)="handleImageLoad()" [class.loaded]="imageLoaded" />
             </label>

             <input  #inputConteudo class="file-path-wrapper" type="file" name="file" accept="image/jpg,image/png"
             (change)="handleInputChange($event)" />
               <button class="btn btn-warning"
             (click)="cancel()" type="button">Cancelar</button>
             <span class="text-danger" *ngIf="displayMessage.conteudo">
              <p [innerHTML]="displayMessage.conteudo"></p>
            </span>
             <br><br>
        </div>
      </div>

      <div class="form-group">
        <div class="col-md-4 col-md-offset-2">
          <button class="btn btn-success" id="Registrar" type="submit"
            [disabled]='!editarConteudoForm.valid'>Registrar</button>
          <a [routerLink]="['/configuracoes/conteudo/listar']" class="btn btn-primary">Voltar para a lista</a>
        </div>
      </div>

    </div>
  </form>
</div>